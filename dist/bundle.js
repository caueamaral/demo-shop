(()=>{"use strict";function e(e){return e.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim()}function t(e){var t=e.trim();return!t.includes("/")&&t.length>2?t=t.replace(/(\d{2})/,"$1/"):t.includes("/")&&3==t.length&&(t=t.replace(/\//,"")),t}function n(){var e=document.querySelector(".js-card");e.classList.remove("visa"),e.classList.remove("mastercard")}function r(){var e=document.querySelector(".js-form-field-number"),t=e.closest(".js-form-group");19==e.value.length?t.classList.remove("invalid"):t.classList.add("invalid")}function a(){var e=document.querySelector(".js-form-field-name"),t=e.closest(".js-form-group");/^[a-zA-z]{2,} [a-zA-Z]{2,}$/.test(e.value)?t.classList.remove("invalid"):t.classList.add("invalid")}function c(){var e=document.querySelector(".js-form-field-validity"),t=e.closest(".js-form-group");5==e.value.length?t.classList.remove("invalid"):t.classList.add("invalid")}function s(){var e=document.querySelector(".js-form-field-cvv"),t=e.closest(".js-form-group");e.value.length>2?t.classList.remove("invalid"):t.classList.add("invalid")}function i(){var e=document.querySelector(".js-form-selection-installments"),t=e.closest(".js-form-group");e.value?t.classList.remove("invalid"):t.classList.add("invalid")}var l,u;document.querySelectorAll(".js-card-data-bind").forEach((function(n){n.addEventListener("input",(function(){return function(){var n=event.target.dataset.bind,r=event.target.value,a=function(e){return e.replace(/\D/g,"")}(r),c="";switch(n){case"number":c=e(a);break;case"name":c=function(e){return e.replace(/[^a-zA-Z\s]/g,"").replace("  "," ").trimStart()}(r);break;case"validity":c=t(a);break;case"cvv":c=a}"installments"!=n&&(event.target.value=c)}(event)})),n.addEventListener("input",(function(){return function(){var n=event.target.dataset.bind,r=document.querySelector(".js-card-data-bind-target[data-bind=".concat(n,"]")),a=event.target.value,c="";switch(n){case"number":c=e(a);break;case"validity":c=t(a);break;case"name":case"cvv":c=a;break;case"installments":return}r.textContent=c,r.textContent||("number"==n?r.innerHTML='<span class="card-front-numbers-interno">'.concat(r.getAttribute("placeholder"),"</span>"):"cvv"==n?r.innerHTML='<span class="card-back-cvv-interno">'.concat(r.getAttribute("placeholder"),"</span>"):r.textContent=r.getAttribute("placeholder"))}(event)}))})),document.querySelector(".js-card-field-name").addEventListener("blur",(function(){event.target.value=event.target.value.trim()})),l=document.querySelector(".js-card"),(u=document.querySelector(".js-card-field-cvv")).addEventListener("focus",(function(){return l.classList.add("flip")})),u.addEventListener("blur",(function(){return l.classList.remove("flip")})),document.querySelectorAll(".js-card-data-bind").forEach((function(e){return e.addEventListener("input",(function(){return function(e){switch(event.target.dataset.bind){case"number":r();break;case"name":a();break;case"validity":c();break;case"cvv":s();break;case"installments":i()}}(event)}))})),document.querySelector(".js-form-button").addEventListener("click",(function(){event.preventDefault(),r(),a(),c(),s(),i()})),document.querySelector(".js-form-field-number").addEventListener("input",(function(){!function(){var e,t=event.target.value,r="";if(t.length<2)return n();function a(e,n){n.forEach((function(n){if(t.startsWith(n))return r=e}))}a("visa",["4"]),a("mastercard",["51","52","53","54","55"]),r&&(e=r,n(),document.querySelector(".js-card").classList.add(e))}()}))})();